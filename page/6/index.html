<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="L6Lm9d5Crl">
  
  
  
  
  <title>StudyForU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="StudyForU">
<meta property="og:url" content="http://studyforu.com/page/6/index.html">
<meta property="og:site_name" content="StudyForU">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="StudyForU">
  
    <link rel="alternative" href="/atom.xml" title="StudyForU" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
  <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet">
  <script>
      var yiliaConfig = {
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>

        <a href="/" class="profilepic">
            
            <img lazy-src="/img/avatar.png" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="#">MarkBin</a></h1>
        </hgroup>
        
        
        <form>
            <!-- <input type="text" class="st-default-search-input search" id="local-search-input" placeholder="搜索一下" autocomplete="off"> -->
            <span style="color:white">gccbug@163.com</span>
        </form>
        <div id="local-search-result"></div>
        
        
        <script type="text/javascript">
            (function () {
                'use strict';
                function getMatchData(keyword, data) {
                    var matchData = [];
                    for (var i = 0; i < data.length; i++) {
                        if (data[i].title.toLowerCase().indexOf(keyword) >= 0)
                            matchData.push(data[i])
                    }
                    return matchData;
                }
                var $input = $('#local-search-input');
                var $resultContent = $('#local-search-result');
                $input.keyup(function () {
                    $.ajax({
                        url: '/search.json',
                        dataType: "json",
                        success: function (json) {
                            var str = '<ul class=\"search-result-list\">';
                            var keyword = $input.val().trim().toLowerCase();
                            $resultContent.innerHTML = "";
                            if ($input.val().trim().length <= 0) {
                                $resultContent.empty();
                                $('#switch-area').show();
                                return;
                            }
                            var results = getMatchData(keyword, json);
                            if (results.length === 0) {
                                $resultContent.empty();
                                $('#switch-area').show();
                                return;
                            }
                            for (var i = 0; i < results.length; i++) {
                                str += "<li><a href='" + results[i].url + "' class='search-result-title'>" + results[i].title + "</a></li>";
                            }
                            str += "</ul>";
                            $resultContent.empty();
                            $resultContent.append(str);
                            $('#switch-area').hide();
                        }
                    });
                });
            })();
        </script>
        
        
        <div id="switch-btn" class="switch-btn">
            <div class="icon">
                <div class="icon-ctn">
                    <div class="icon-wrap icon-house" data-idx="0">
                        <div class="birdhouse"></div>
                        <div class="birdhouse_holes"></div>
                    </div>
                    <div class="icon-wrap icon-ribbon hide" data-idx="1">
                        <div class="ribbon"></div>
                    </div>
                    
                        
                    <div class="icon-wrap icon-me hide" data-idx="3">
                        <div class="user"></div>
                        <div class="shoulder"></div>
                    </div>
                    
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                    <li>关于我</li>
                    
                    </ul>
                </div>
            </div>
        
                    <div id="switch-area" class="switch-area">
                        <div class="switch-wrap">
                            <section class="switch-part switch-part1">
                                <nav class="header-menu">
                                    <ul>
                                        
                                        <li><a href="/categories/ios">IOS</a></li>
                                        
                                        <li><a href="/categories/web">WEB</a></li>
                                        
                                        <li><a href="/categories/go">GO</a></li>
                                        
                                        <li><a href="/categories/java">JAVA</a></li>
                                        
                                        <li><a href="/categories/python">PYTHON</a></li>
                                        
                                        <li><a href="/categories/database">DATA BASE</a></li>
                                        
                                        <li><a href="/categories/server">SERVER</a></li>
                                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                        <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/specialdrug/activities" title="zhihu">zhihu</a>
                                        
                                        <a class="fl github" target="_blank" href="https://github.com/susebing" title="github">github</a>
                                        
                                        <a class="fl weibo" target="_blank" href="https://weibo.com/p/1005056213743248/home?from=page_100505&mod=TAB#place" title="weibo">weibo</a>
                                        
                        </ul>
                    </nav>
                </section>
                
                                        <section class="switch-part switch-part2">
                                            <div class="widget tagcloud" id="js-tagcloud">
                                                <a href="/tags/AFNetworking/" style="font-size: 10px;">AFNetworking</a> <a href="/tags/B-树/" style="font-size: 10px;">B+树</a> <a href="/tags/Beautiful-Soup/" style="font-size: 13.33px;">Beautiful Soup</a> <a href="/tags/BootStrap/" style="font-size: 10px;">BootStrap</a> <a href="/tags/B树/" style="font-size: 10px;">B树</a> <a href="/tags/Django/" style="font-size: 13.33px;">Django</a> <a href="/tags/Flask/" style="font-size: 13.33px;">Flask</a> <a href="/tags/Hadoop/" style="font-size: 10px;">Hadoop</a> <a href="/tags/JQuery/" style="font-size: 10px;">JQuery</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Jupyter/" style="font-size: 10px;">Jupyter</a> <a href="/tags/Less/" style="font-size: 10px;">Less</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/MJRefresh/" style="font-size: 10px;">MJRefresh</a> <a href="/tags/Matplotlib/" style="font-size: 10px;">Matplotlib</a> <a href="/tags/Memcached/" style="font-size: 13.33px;">Memcached</a> <a href="/tags/MongoDB/" style="font-size: 10px;">MongoDB</a> <a href="/tags/MySQL-在线添加字段/" style="font-size: 10px;">MySQL 在线添加字段</a> <a href="/tags/MySQL-扩展/" style="font-size: 10px;">MySQL 扩展</a> <a href="/tags/Mysql-性能优化/" style="font-size: 10px;">Mysql 性能优化</a> <a href="/tags/Mysql-索引/" style="font-size: 10px;">Mysql 索引</a> <a href="/tags/NOSQL图形数据库/" style="font-size: 10px;">NOSQL图形数据库</a> <a href="/tags/Neo4j/" style="font-size: 10px;">Neo4j</a> <a href="/tags/Nginx/" style="font-size: 13.33px;">Nginx</a> <a href="/tags/Numpy/" style="font-size: 10px;">Numpy</a> <a href="/tags/OOP/" style="font-size: 10px;">OOP</a> <a href="/tags/Pandas/" style="font-size: 10px;">Pandas</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/PySpider/" style="font-size: 13.33px;">PySpider</a> <a href="/tags/Pycharm/" style="font-size: 10px;">Pycharm</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Redis/" style="font-size: 13.33px;">Redis</a> <a href="/tags/Requests/" style="font-size: 13.33px;">Requests</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/Scrapy/" style="font-size: 13.33px;">Scrapy</a> <a href="/tags/Spark/" style="font-size: 10px;">Spark</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Tornado/" style="font-size: 13.33px;">Tornado</a> <a href="/tags/WSGI/" style="font-size: 10px;">WSGI</a> <a href="/tags/bar/" style="font-size: 10px;">bar</a> <a href="/tags/beego框架/" style="font-size: 10px;">beego框架</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/conda/" style="font-size: 10px;">conda</a> <a href="/tags/consul/" style="font-size: 10px;">consul</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/dict/" style="font-size: 10px;">dict</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/etcd/" style="font-size: 10px;">etcd</a> <a href="/tags/gRPC/" style="font-size: 10px;">gRPC</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go基础语法/" style="font-size: 10px;">go基础语法</a> <a href="/tags/hibernate/" style="font-size: 13.33px;">hibernate</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/http2-0/" style="font-size: 10px;">http2.0</a> <a href="/tags/http协议区别/" style="font-size: 10px;">http协议区别</a> <a href="/tags/java基础语法/" style="font-size: 10px;">java基础语法</a> <a href="/tags/jenkens/" style="font-size: 10px;">jenkens</a> <a href="/tags/jsp/" style="font-size: 10px;">jsp</a> <a href="/tags/jvm/" style="font-size: 10px;">jvm</a> <a href="/tags/list/" style="font-size: 10px;">list</a> <a href="/tags/macdown/" style="font-size: 10px;">macdown</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/mybatis/" style="font-size: 13.33px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/objective-c/" style="font-size: 10px;">objective-c</a> <a href="/tags/os-模块/" style="font-size: 10px;">os 模块</a> <a href="/tags/pie/" style="font-size: 10px;">pie</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/python版本管理/" style="font-size: 10px;">python版本管理</a> <a href="/tags/servlet/" style="font-size: 10px;">servlet</a> <a href="/tags/set/" style="font-size: 10px;">set</a> <a href="/tags/shutil-模块/" style="font-size: 10px;">shutil 模块</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/spring/" style="font-size: 16.67px;">spring</a> <a href="/tags/spring-mvc/" style="font-size: 13.33px;">spring mvc</a> <a href="/tags/springboot/" style="font-size: 10px;">springboot</a> <a href="/tags/struts/" style="font-size: 10px;">struts</a> <a href="/tags/struts2/" style="font-size: 10px;">struts2</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/tuple/" style="font-size: 10px;">tuple</a> <a href="/tags/uWSGI/" style="font-size: 10px;">uWSGI</a> <a href="/tags/udp/" style="font-size: 10px;">udp</a> <a href="/tags/uwsgi/" style="font-size: 10px;">uwsgi</a> <a href="/tags/web-py/" style="font-size: 10px;">web.py</a> <a href="/tags/web前端入门/" style="font-size: 10px;">web前端入门</a> <a href="/tags/二维数组/" style="font-size: 10px;">二维数组</a> <a href="/tags/函数/" style="font-size: 10px;">函数</a> <a href="/tags/动态网页/" style="font-size: 10px;">动态网页</a> <a href="/tags/包/" style="font-size: 10px;">包</a> <a href="/tags/反爬虫/" style="font-size: 10px;">反爬虫</a> <a href="/tags/图表/" style="font-size: 10px;">图表</a> <a href="/tags/多维数组/" style="font-size: 13.33px;">多维数组</a> <a href="/tags/套接字/" style="font-size: 10px;">套接字</a> <a href="/tags/容器/" style="font-size: 10px;">容器</a> <a href="/tags/容器通信/" style="font-size: 10px;">容器通信</a> <a href="/tags/库/" style="font-size: 10px;">库</a> <a href="/tags/异常/" style="font-size: 10px;">异常</a> <a href="/tags/数据类型/" style="font-size: 13.33px;">数据类型</a> <a href="/tags/文件内容读写/" style="font-size: 10px;">文件内容读写</a> <a href="/tags/文件操作/" style="font-size: 10px;">文件操作</a> <a href="/tags/服务端实用技术/" style="font-size: 10px;">服务端实用技术</a> <a href="/tags/服务端缓存/" style="font-size: 10px;">服务端缓存</a> <a href="/tags/查询优化/" style="font-size: 10px;">查询优化</a> <a href="/tags/标签语言/" style="font-size: 10px;">标签语言</a> <a href="/tags/样式表/" style="font-size: 10px;">样式表</a> <a href="/tags/框架/" style="font-size: 10px;">框架</a> <a href="/tags/模块/" style="font-size: 10px;">模块</a> <a href="/tags/流程控制/" style="font-size: 10px;">流程控制</a> <a href="/tags/消息队列/" style="font-size: 10px;">消息队列</a> <a href="/tags/环境版本/" style="font-size: 10px;">环境版本</a> <a href="/tags/生成器/" style="font-size: 10px;">生成器</a> <a href="/tags/目录操作/" style="font-size: 10px;">目录操作</a> <a href="/tags/矢量计算/" style="font-size: 13.33px;">矢量计算</a> <a href="/tags/矩阵/" style="font-size: 10px;">矩阵</a> <a href="/tags/科学计算/" style="font-size: 13.33px;">科学计算</a> <a href="/tags/虚拟机/" style="font-size: 10px;">虚拟机</a> <a href="/tags/装饰器/" style="font-size: 10px;">装饰器</a> <a href="/tags/运算符/" style="font-size: 10px;">运算符</a> <a href="/tags/镜像/" style="font-size: 13.33px;">镜像</a> <a href="/tags/闭包/" style="font-size: 10px;">闭包</a>
                                            </div>
                                        </section>
                                        
                
                
                                        
                                        <section class="switch-part switch-part3">
                                            
                    <div id="js-aboutme">技术是个无底洞，唯有学以致用！
                        </div>
                        </section>
                        
            </div>
        </div>
    </header>
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">MarkBin</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/avatar.png" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">MarkBin</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/categories/ios">IOS</a></li>
                
                    <li><a href="/categories/web">WEB</a></li>
                
                    <li><a href="/categories/go">GO</a></li>
                
                    <li><a href="/categories/java">JAVA</a></li>
                
                    <li><a href="/categories/python">PYTHON</a></li>
                
                    <li><a href="/categories/database">DATA BASE</a></li>
                
                    <li><a href="/categories/server">SERVER</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/specialdrug/activities" title="zhihu">zhihu</a>
                    
                        <a class="github" target="_blank" href="https://github.com/susebing" title="github">github</a>
                    
                        <a class="weibo" target="_blank" href="https://weibo.com/p/1005056213743248/home?from=page_100505&mod=TAB#place" title="weibo">weibo</a>
                    
                </div>
            </nav>
        </header>
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-20170402-spring" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/04/02/20170402-spring/" class="article-date">
      <time datetime="2017-04-02T02:19:35.000Z" itemprop="datePublished">2017-04-02</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/02/20170402-spring/">java 开发框架 Spring</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>Spring框架是由于软件开发的复杂性而创建的。Spring使用的是基本的JavaBean来完成以前只可能由EJB完成的事情。然而，Spring的用途不仅仅限于服务器端的开发。从简单性、可测试性和松耦合性角度而言，绝大部分Java应用都可以从Spring中受益。</p>
<ul>
<li>◆目的：解决企业应用开发的复杂性</li>
<li>◆功能：使用基本的JavaBean代替<a href="https://baike.baidu.com/item/EJB/144195?fr=aladdin" target="_blank" rel="noopener">EJB</a>，并提供了更多的企业应用功能</li>
<li>◆范围：任何Java应用</li>
</ul>
<p>Spring是一个轻量级控制反转(IoC)和面向切面(AOP)的容器框架。</p>
<h3 id="Spring的初衷："><a href="#Spring的初衷：" class="headerlink" title="Spring的初衷："></a>Spring的初衷：</h3><ul>
<li>1、JAVA EE开始应该更加简单。</li>
<li>2、使用接口而不是使用类，是更好的编程习惯。Spring将使用接口的复杂度几乎降低到了零。</li>
<li>3、为JavaBean提供了一个更好的应用配置框架。</li>
<li>4、更多地强调面向对象的设计，而不是现行的技术如JAVA EE。</li>
<li>5、尽量减少不必要的异常捕捉。</li>
<li>6、使应用程序更加容易测试。</li>
</ul>
<h3 id="Spring的目标："><a href="#Spring的目标：" class="headerlink" title="Spring的目标："></a>Spring的目标：</h3><ul>
<li>1、可以令人方便愉快的使用Spring。</li>
<li>2、应用程序代码并不依赖于Spring APIs。</li>
<li>3、Spring不和现有的解决方案竞争，而是致力于将它们融合在一起。</li>
</ul>
<h3 id="Spring的基本组成："><a href="#Spring的基本组成：" class="headerlink" title="Spring的基本组成："></a>Spring的基本组成：</h3><ul>
<li>1、最完善的轻量级核心框架。</li>
<li>2、通用的事务管理抽象层。</li>
<li>3、JDBC抽象层。</li>
<li>4、集成了Toplink, Hibernate, JDO, and iBATIS SQL Maps。</li>
<li>5、AOP功能。</li>
<li>6、灵活的MVC Web应用框架。</li>
</ul>
<h3 id="IoC-控制反转"><a href="#IoC-控制反转" class="headerlink" title="IoC 控制反转"></a><a href="https://www.cnblogs.com/xdp-gacl/p/4249939.html" target="_blank" rel="noopener">IoC 控制反转</a></h3><h3 id="AOP-面向切面"><a href="#AOP-面向切面" class="headerlink" title="AOP 面向切面"></a><a href="https://www.cnblogs.com/zhaozihan/p/5953063.html" target="_blank" rel="noopener">AOP 面向切面</a></h3>
    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring-mvc/">spring mvc</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170321-mysql（B树与B+树）" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/21/20170321-mysql（B树与B+树）/" class="article-date">
      <time datetime="2017-03-21T04:12:59.000Z" itemprop="datePublished">2017-03-21</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/21/20170321-mysql（B树与B+树）/">MySQL 索引树</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    
    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/B-树/">B+树</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/B树/">B树</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170320-mysql扩展" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/20/20170320-mysql扩展/" class="article-date">
      <time datetime="2017-03-20T04:12:59.000Z" itemprop="datePublished">2017-03-20</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/20170320-mysql扩展/">MySQL 扩展</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    
    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL-扩展/">MySQL 扩展</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170319-mysql在线添加字段" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/19/20170319-mysql在线添加字段/" class="article-date">
      <time datetime="2017-03-19T04:12:59.000Z" itemprop="datePublished">2017-03-19</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/19/20170319-mysql在线添加字段/">MySQL 在线添加字段</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>MySQL在进行表结构变更时锁表会带来线上业务的影响。所以，如何处理好动态在线新增字段就变得很重要。</p>
<h3 id="低峰期改表（方案一）"><a href="#低峰期改表（方案一）" class="headerlink" title="低峰期改表（方案一）"></a>低峰期改表（方案一）</h3><p>业务低峰期进行 ALTER TABLE。例如，凌晨1点或2点进行:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`test`</span> <span class="keyword">ADD</span> <span class="string">`new_column`</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">comment</span> <span class="string">'文本长度'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="临时表加字段（方案二）"><a href="#临时表加字段（方案二）" class="headerlink" title="临时表加字段（方案二）"></a>临时表加字段（方案二）</h3><p>创建临时表-&gt;加字段-&gt;插入旧数据-&gt;增量数据插入-&gt;重命名表名</p>
<p>1). 创建临时表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test_tmp <span class="keyword">LIKE</span> <span class="keyword">test</span>;</span><br></pre></td></tr></table></figure>
<p>2). 在临时表上添加字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`test_tmp`</span> <span class="keyword">ADD</span> <span class="string">`new_column`</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">comment</span> <span class="string">'文本长度'</span>;</span><br></pre></td></tr></table></figure>
<p>3). 向临时表里插入旧数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_tmp(<span class="keyword">id</span>,<span class="keyword">name</span>) (<span class="keyword">SELECT</span> <span class="keyword">id</span>,<span class="keyword">name</span> <span class="keyword">from</span> <span class="keyword">test</span>);</span><br></pre></td></tr></table></figure>
<p>4). 增量数据插入:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test_tmp(<span class="keyword">id</span>,<span class="keyword">name</span>) (<span class="keyword">SELECT</span> <span class="keyword">id</span>,<span class="keyword">name</span> <span class="keyword">from</span> <span class="keyword">test</span> <span class="keyword">WHERE</span> <span class="string">`id`</span> &gt; (<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(<span class="string">`id`</span>) <span class="keyword">from</span> <span class="string">`test_tmp`</span>));</span><br></pre></td></tr></table></figure>
<p>5). 重命名表名：<br>mysql&gt;rename table test TO test_2018;<br>mysql&gt;rename table test_tmp TO test;</p>
<h3 id="开源工具（方案三）"><a href="#开源工具（方案三）" class="headerlink" title="开源工具（方案三）"></a>开源工具（方案三）</h3><p>用第三方开源工具实现，具体实现步骤看链接:</p>
<ul>
<li><a href="https://wing324.github.io/2015/10/13/oak-online-alter-table%E5%B7%A5%E5%85%B7/" target="_blank" rel="noopener">oak-online-alter-table</a></li>
<li><a href="https://www.percona.com/doc/percona-toolkit/LATEST/pt-online-schema-change.html" target="_blank" rel="noopener">pt-osc</a></li>
<li><a href="http://www.cnblogs.com/jiangwenju/p/5846743.html" target="_blank" rel="noopener">gh-ost</a></li>
<li><a href="https://github.com/facebookincubator/OnlineSchemaChange" target="_blank" rel="noopener">facebook osc(Online Schema Change for MySQL)</a></li>
<li><a href="http://cenalulu.github.io/mysql/open_source_osc/" target="_blank" rel="noopener">Facebook OnlineSchemaChange 再开源和改进介绍</a></li>
</ul>
<h3 id="从表加字段（方案四）"><a href="#从表加字段（方案四）" class="headerlink" title="从表加字段（方案四）"></a>从表加字段（方案四）</h3><p>在从库进行添加字段操作，然后进行mysql主从切换</p>
<p><code>注意事项:</code>主从复制日志格式如果为row格式，添加的新列必须是在表的最后。</p>
<h3 id="创建关联表（方案五）"><a href="#创建关联表（方案五）" class="headerlink" title="创建关联表（方案五）"></a>创建关联表（方案五）</h3><p>为了不长时间的停服维护，单独建立一张关联表来存这个新的字段，把相应的insert处修改 。   这样也可以应对再新增字段时的需求。</p>
<h3 id="热门讨论"><a href="#热门讨论" class="headerlink" title="热门讨论"></a>热门讨论</h3><ul>
<li><a href="https://www.oschina.net/question/1763252_2282561?nocache=1530758844590" target="_blank" rel="noopener">mysql 亿级表增加一个字段 热</a></li>
<li><a href="https://www.cnblogs.com/pyxiaomangshe/p/7883405.html" target="_blank" rel="noopener">mysql 千万级数据表，创建表及字段扩展的几条建议</a></li>
<li><a href="https://bbs.csdn.net/topics/391078924" target="_blank" rel="noopener">mysql 如何更好的给一个千万级数据量的表增加一个字段</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL-在线添加字段/">MySQL 在线添加字段</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170318-mysql性能优化" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/18/20170318-mysql性能优化/" class="article-date">
      <time datetime="2017-03-18T04:12:59.000Z" itemprop="datePublished">2017-03-18</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/18/20170318-mysql性能优化/">MySQL 性能优化</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>今天，数据库的操作越来越成为整个应用的性能瓶颈了，这点对于Web应用尤其明显。关于数据库的性能，这并不只是DBA才需要担心的事，而这更是我们程序员需要去关注的事情。当我们去设计数据库表结构，对操作数据库时（尤其是查表时的SQL语句），我们都需要注意数据操作的性能。</p>
<p>MySQL对于很多Linux从业者而言，是一个非常棘手的问题，多数情况都是因为对数据库出现问题的情况和处理思路不清晰。</p>
<p>在进行MySQL的优化之前必须要了解的就是MySQL的查询过程，很多的查询优化工作实际上就是遵循一些原则让MySQL的优化器能够按照预想的合理方式运行而已。</p>
<h3 id="优化选择"><a href="#优化选择" class="headerlink" title="优化选择"></a>优化选择</h3><p><code>优化成本:</code>硬件&gt;系统配置&gt;数据库表结构&gt;SQL及索引<br><code>优化效果:</code>硬件&lt;系统配置&lt;数据库表结构&lt;SQL及索引</p>
<h3 id="数据表、SQL优化方案"><a href="#数据表、SQL优化方案" class="headerlink" title="数据表、SQL优化方案"></a>数据表、SQL优化方案</h3><ol>
<li><code>为查询缓存优化你的查询</code>用一个变量来代替MySQL的函数，从而开启缓存。</li>
<li><code>EXPLAIN 你的 SELECT 查询</code>使用 EXPLAIN 关键字可以让你知道MySQL是如何处理你的SQL语句的。这可以帮你分析你的查询语句或是表结构的性能瓶颈。EXPLAIN 的查询结果还会告诉你你的索引主键被如何利用的，你的数据表是如何被搜索和排序的……等等，等等。查看 <code>rows</code> 列可以让我们找到潜在的性能问题。</li>
<li><code>当只要一行数据时使用 LIMIT 1</code>当你查询表的有些时候，你已经知道结果只会有一条结果，但因为你可能需要去fetch游标，或是你也许会去检查返回的记录数。在这种情况下，加上 LIMIT 1 可以增加性能。</li>
<li><code>为搜索字段建索引</code>索引并不一定就是给主键或是唯一的字段。如果在你的表中，有某个字段你总要会经常用来做搜索，那么，请为其建立索引吧。另外，应该也需要知道什么样的搜索是不能使用正常的索引的。例如，当你需要在一篇大的文章中搜索一个词时，如： “WHERE post_content LIKE ‘%apple%’”，索引可能是没有意义的。你可能需要使用MySQL全文索引 或是自己做一个索引（比如说：搜索关键词或是Tag什么的）</li>
<li><code>在Join表的时候使用相当类型的列，并将其索引</code>如果你的应用程序有很多 JOIN 查询，你应该确认两个表中Join的字段是被建过索引的。这样，MySQL内部会启动为你优化Join的SQL语句的机制。而且，这些被用来Join的字段，应该是相同的类型的。例如：如果你要把 DECIMAL 字段和一个 INT 字段Join在一起，MySQL就无法使用它们的索引。对于那些STRING类型，还需要有相同的字符集才行。（两个表的字符集有可能不一样）</li>
<li><code>千万不要 ORDER BY RAND()</code>如果你真的想把返回的数据行打乱了，你有N种方法可以达到这个目的。这样使用只让你的数据库的性能呈指数级的下降。这里的问题是：MySQL会不得不去执行RAND()函数（很耗CPU时间），而且这是为了每一行记录去记行，然后再对其排序。</li>
<li><code>避免 SELECT *</code>从数据库里读出越多的数据，那么查询就会变得越慢。并且，如果你的数据库服务器和WEB服务器是两台独立的服务器的话，这还会增加网络传输的负载。应该养成一个需要什么就取什么的好的习惯。</li>
<li><code>永远为每张表设置一个ID</code>我们应该为数据库里的每张表都设置一个ID做为其主键，而且最好的是一个INT型的（推荐使用UNSIGNED），并设置上自动增加的AUTO_INCREMENT标志。就算是你 users 表有一个主键叫 “email”的字段，你也别让它成为主键。使用 VARCHAR 类型来当主键会使用得性能下降。另外，在你的程序中，你应该使用表的ID来构造你的数据结构。而且，在MySQL数据引擎下，还有一些操作需要使用主键，在这些情况下，主键的性能和设置变得非常重要，比如，集群，分区……在这里，只有一个情况是例外，那就是“关联表”的“外键”，也就是说，这个表的主键，通过若干个别的表的主键构成。我们把这个情况叫做“外键”。比如：有一个“学生表”有学生的ID，有一个“课程表”有课程ID，那么，“成绩表”就是“关联表”了，其关联了学生表和课程表，在成绩表中，学生ID和课程ID叫“外键”其共同组成主键。</li>
<li><code>使用 ENUM 而不是 VARCHAR</code>ENUM 类型是非常快和紧凑的。在实际上，其保存的是 TINYINT，但其外表上显示为字符串。这样一来，用这个字段来做一些选项列表变得相当的完美。如果你有一个字段，比如“性别”，“国家”，“民族”，“状态”或“部门”，你知道这些字段的取值是有限而且固定的，那么，你应该使用 ENUM 而不是 VARCHAR。MySQL也有一个“建议”（见第十条）告诉你怎么去重新组织你的表结构。当你有一个 VARCHAR 字段时，这个建议会告诉你把其改成 ENUM 类型。使用 PROCEDURE ANALYSE() 你可以得到相关的建议。</li>
<li><code>从 PROCEDURE ANALYSE() 取得建议</code>PROCEDURE ANALYSE() 会让 MySQL 帮你去分析你的字段和其实际的数据，并会给你一些有用的建议。只有表中有实际的数据，这些建议才会变得有用，因为要做一些大的决定是需要有数据作为基础的。例如，如果你创建了一个 INT 字段作为你的主键，然而并没有太多的数据，那么，PROCEDURE ANALYSE()会建议你把这个字段的类型改成 MEDIUMINT 。或是你使用了一个 VARCHAR 字段，因为数据不多，你可能会得到一个让你把它改成 ENUM 的建议。这些建议，都是可能因为数据不够多，所以决策做得就不够准。</li>
<li><code>尽可能的使用 NOT NULL</code>除非你有一个很特别的原因去使用 NULL 值，你应该总是让你的字段保持 NOT NULL。不要以为 NULL 不需要空间，其需要额外的空间，并且，在你进行比较的时候，你的程序会更复杂。当然，这里并不是说你就不能使用NULL了，现实情况是很复杂的，依然会有些情况下，你需要使用NULL值。</li>
<li><code>Prepared Statements</code>在性能方面，当一个相同的查询被使用多次的时候，这会为你带来可观的性能优势。你可以给这些Prepared Statements定义一些参数，而MySQL只会解析一次。当然，也有一些情况下，我们需要避免使用Prepared Statements，因为其不支持查询缓存。但据说版本5.1后支持了。</li>
<li><code>无缓冲的查询</code></li>
<li><code>把IP地址存成 UNSIGNED INT</code></li>
<li><code>固定长度的表会更快</code>固定长度的表会提高性能，因为MySQL搜寻得会更快一些，因为这些固定的长度是很容易计算下一个数据的偏移量的，所以读取的自然也会很快。而如果字段不是定长的，那么，每一次要找下一条的话，需要程序找到主键。并且，固定长度的表也更容易被缓存和重建。不过，唯一的副作用是，固定长度的字段会浪费一些空间，因为定长的字段无论你用不用，他都是要分配那么多的空间。</li>
<li><code>垂直分割</code>“垂直分割”是一种把数据库中的表按列变成几张表的方法，这样可以降低表的复杂度和字段的数目，从而达到优化的目的。（以前，在银行做过项目，见过一张表有100多个字段，很恐怖。）</li>
<li><code>拆分大的 DELETE 或 INSERT 语句</code>如果你需要在一个在线的网站上去执行一个大的 DELETE 或 INSERT 查询，你需要非常小心，要避免你的操作让你的整个网站停止相应。因为这两个操作是会锁表的，表一锁住了，别的操作都进不来了。</li>
<li><code>越小的列会越快</code>如果一个表只会有几列罢了（比如说字典表，配置表），那么，我们就没有理由使用 INT 来做主键，使用 MEDIUMINT, SMALLINT 或是更小的 TINYINT 会更经济一些。如果你不需要记录时间，使用 DATE 要比 DATETIME 好得多。当然，你也需要留够足够的扩展空间，不然，你日后来干这个事，你会死的很难看，参看<a href="http://news.slashdot.org/article.pl?sid=06/11/09/1534204" target="_blank" rel="noopener">Slashdot的例子</a>（2009年11月06日），一个简单的ALTER TABLE语句花了3个多小时，因为里面有一千六百万条数据。</li>
<li><code>选择正确的存储引擎</code>MyISAM 适合于一些需要大量查询的应用，但其对于有大量写操作并不是很好。甚至你只是需要update一个字段，整个表都会被锁起来，而别的进程，就算是读进程都无法操作直到读操作完成。另外，MyISAM 对于 SELECT COUNT(*) 这类的计算是超快无比的。InnoDB 的趋势会是一个非常复杂的存储引擎，对于一些小的应用，它会比 MyISAM 还慢。他是它支持“行锁” ，于是在写操作比较多的时候，会更优秀。并且，他还支持更多的高级应用，比如：事务。</li>
<li><code>使用一个对象关系映射器（Object Relational Mapper）</code>ORM 还可以把你的SQL语句打包成一个事务，这会比单独执行他们快得多得多。</li>
<li><code>小心“永久链接”</code>“永久链接”的目的是用来减少重新创建MySQL链接的次数。当一个链接被创建了，它会永远处在连接的状态，就算是数据库操作已经结束了。</li>
</ol>
<h3 id="热门讨论"><a href="#热门讨论" class="headerlink" title="热门讨论"></a>热门讨论</h3><ul>
<li><a href="https://www.cnblogs.com/zhouyusheng/p/8038224.html" target="_blank" rel="noopener">MYSQL性能优化的最佳20+条经验</a></li>
<li><a href="https://www.jianshu.com/p/4af41b682e06" target="_blank" rel="noopener">史上最全的MySQL高性能优化实战总结！</a></li>
<li><a href="http://baijiahao.baidu.com/s?id=1596097076448817432&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">MySQL教程之MySQL数据库优化小建议</a></li>
<li><a href="https://blog.csdn.net/zhangbijun1230/article/details/81608252" target="_blank" rel="noopener">MySQL数据库优化的八种方式(经典必看)</a></li>
<li><a href="https://blog.csdn.net/u013628152/article/details/82184809" target="_blank" rel="noopener">数据库优化方案整理</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mysql-性能优化/">Mysql 性能优化</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170317-mysql索引与查询" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/17/20170317-mysql索引与查询/" class="article-date">
      <time datetime="2017-03-17T04:12:59.000Z" itemprop="datePublished">2017-03-17</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/17/20170317-mysql索引与查询/">MySQL 索引与查询</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>MySQL凭借着出色的性能、低廉的成本、丰富的资源，已经成为绝大多数互联网公司的首选关系型数据库。</p>
<p>虽然性能出色，但所谓“好马配好鞍”，如何能够更好的使用它，已经成为开发工程师的必修课，我们经常会从职位描述上看到诸如“精通MySQL”、“SQL语句优化”、“了解数据库原理”等要求。</p>
<p>我们知道一般的应用系统，读写比例在10:1左右，而且插入操作和一般的更新操作很少出现性能问题，遇到最多的，也是最容易出问题的，还是一些复杂的查询操作，所以查询语句的优化显然是重中之重。</p>
<p>随着业务的复杂性提升，遇到的问题千奇百怪，五花八门，匪夷所思。数据库索引的原理和如何优化慢查询成为了必修课。</p>
<p>多数情况下，我们知道索引能够提高查询效率，但应该如何建立索引？索引的顺序如何？许多人却只知道大概。其实理解这些概念并不难，而且索引的原理远没有想象的那么复杂。</p>
<h3 id="建索引的几大原则"><a href="#建索引的几大原则" class="headerlink" title="建索引的几大原则"></a>建索引的几大原则</h3><ol>
<li>最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(&gt;、&lt;、between、like)就停止匹配，比如a = 1 and b = 2 and c &gt; 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。</li>
<li>=和in可以乱序，比如a = 1 and b = 2 and c = 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式</li>
<li>尽量选择区分度高的列作为索引,区分度的公式是count(distinct col)/count(*)，表示字段不重复的比例，比例越大我们扫描的记录数越少，唯一键的区分度是1，而一些状态、性别字段可能在大数据面前区分度就是0，那可能有人会问，这个比例有什么经验值吗？使用场景不同，这个值也很难确定，一般需要join的字段我们都要求是0.1以上，即平均1条扫描10条记录</li>
<li>索引列不能参与计算，保持列“干净”，比如from_unixtime(create_time) = ’2014-05-29’就不能使用到索引，原因很简单，b+树中存的都是数据表中的字段值，但进行检索时，需要把所有元素都应用函数才能比较，显然成本太大。所以语句应该写成create_time = unix_timestamp(’2014-05-29’);</li>
<li>尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修改原来的索引即可</li>
</ol>
<ul>
<li><a href="https://www.cnblogs.com/zhouyusheng/p/8037839.html" target="_blank" rel="noopener">索引原理和慢查询优化</a></li>
<li><a href="https://www.cnblogs.com/zhouyusheng/p/8034202.html" target="_blank" rel="noopener">MySQL索引背后的数据结构及算法原理</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mysql-索引/">Mysql 索引</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/查询优化/">查询优化</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170230-maven" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/02/20170230-maven/" class="article-date">
      <time datetime="2017-03-02T02:19:35.000Z" itemprop="datePublished">2017-03-02</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/20170230-maven/">java 项目管理工具 maven 使用指南</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>Maven项目对象模型(POM)，可以通过一小段描述信息来管理项目的构建，报告和文档的项目管理工具软件。<br>Maven 除了以程序构建能力为特色之外，还提供高级项目管理工具。由于 Maven 的缺省构建规则有较高的可重用性，所以常常用两三行 Maven 构建脚本就可以构建简单的项目。由于 Maven 的面向项目的方法，许多 Apache Jakarta 项目发文时使用 Maven，而且公司项目采用 Maven 的比例在持续增长。</p>
<p>Maven这个单词来自于意第绪语（犹太语），意为知识的积累，最初在Jakata Turbine项目中用来简化构建过程。当时有一些项目（有各自Ant build文件），仅有细微的差别，而JAR文件都由CVS来维护。于是希望有一种标准化的方式构建项目，一个清晰的方式定义项目的组成，一个容易的方式发布项目的信息，以及一种简单的方式在多个项目中共享JARs。</p>
<p>Maven是一个项目管理工具，它包含了一个项目对象模型 (Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。当你使用Maven的时候，你用一个明确定义的项目对象模型来描述你的项目，然后Maven可以应用横切的逻辑，这些逻辑来自一组共享的（或者自定义的）插件。</p>
<p>Maven 有一个生命周期，当你运行 mvn install 的时候被调用。这条命令告诉 Maven 执行一系列的有序的步骤，直到到达你指定的生命周期。遍历生命周期旅途中的一个影响就是，Maven 运行了许多默认的插件目标，这些目标完成了像编译和创建一个 JAR 文件这样的工作。</p>
<p>此外，Maven能够很方便的帮你管理项目报告，生成站点，管理JAR文件，等等。</p>
<ul>
<li><a href="https://www.cnblogs.com/xdp-gacl/p/3498271.html" target="_blank" rel="noopener">Maven 安装与使用</a></li>
<li><a href="https://mvnrepository.com/" target="_blank" rel="noopener">MVN Repository jar 包仓库</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170302-tomcat服务器" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/02/20170302-tomcat服务器/" class="article-date">
      <time datetime="2017-03-02T02:19:35.000Z" itemprop="datePublished">2017-03-02</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/20170302-tomcat服务器/">Apache Tomcat 服务器</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由Apache、Sun 和其他一些公司及个人共同开发而成。由于有了Sun 的参与和支持，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现。因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>
<p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP 程序的首选。对于一个初学者来说，可以这样认为，当在一台机器上配置好Apache 服务器，可利用它响应HTML（标准通用标记语言下的一个应用）页面的访问请求。实际上Tomcat是Apache 服务器的扩展，但运行时它是独立运行的，所以当你运行tomcat 时，它实际上作为一个与Apache 独立的进程单独运行的。诀窍是，当配置正确时，Apache 为HTML页面服务，而Tomcat 实际上运行JSP 页面和Servlet。另外，Tomcat和IIS等Web服务器一样，具有处理HTML页面的功能，另外<code>它还是一个Servlet和JSP容器</code>，独立的Servlet容器是Tomcat的默认模式。不过，Tomcat处理静态HTML的能力不如Apache服务器。目前Tomcat最新版本为9.0。</p>
<ul>
<li><a href="https://tomcat.apache.org/download-70.cgi" target="_blank" rel="noopener">Tomcat 下载</a></li>
<li><a href="https://jingyan.baidu.com/article/2c8c281daa77aa0008252aff.html" target="_blank" rel="noopener">Tomcat 安装</a></li>
<li><a href="https://www.cnblogs.com/puresoul/p/4234742.html" target="_blank" rel="noopener">Tomcat 使用</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tomcat/">Tomcat</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170302-jsp&amp;servlet" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/03/02/20170302-jsp&servlet/" class="article-date">
      <time datetime="2017-03-02T02:19:35.000Z" itemprop="datePublished">2017-03-02</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/02/20170302-jsp&servlet/">java web 开发之 jsp &amp; servlet</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <h3 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h3><p>JSP全名为Java Server Pages，中文名叫java服务器页面，其根本是一个简化的Servlet设计，它是由Sun Microsystems公司倡导、许多公司参与一起建立的一种动态网页技术标准。JSP技术有点类似ASP技术，它是在传统的网页HTML（标准通用标记语言的子集）文件(<em>.htm,</em>.html)中插入Java程序段(Scriptlet)和JSP标记(tag)，从而形成JSP文件，后缀名为(*.jsp)。 用JSP开发的Web应用是跨平台的，既能在Linux下运行，也能在其他操作系统上运行。</p>
<p>它实现了Html语法中的java扩展（以 &lt;%, %&gt;形式）。JSP与Servlet一样，是在服务器端执行的。通常返回给客户端的就是一个HTML文本，因此客户端只要有浏览器就能浏览。</p>
<p>JSP技术使用Java编程语言编写类XML的tags和scriptlets，来封装产生动态网页的处理逻辑。网页还能通过tags和scriptlets访问存在于服务端的资源的应用逻辑。JSP将网页逻辑与网页设计的显示分离，支持可重用的基于组件的设计，使基于Web的应用程序的开发变得迅速和容易。 JSP(JavaServer Pages)是一种动态页面技术，它的主要目的是将表示逻辑从Servlet中分离出来。</p>
<p>Java Servlet是JSP的技术基础，而且大型的Web应用程序的开发需要Java Servlet和JSP配合才能完成。JSP具备了Java技术的简单易用，完全的面向对象，具有平台无关性且安全可靠，主要面向因特网的所有特点。</p>
<p>一个JSP页面组成：</p>
<ul>
<li>静态数据，如HTML</li>
<li>JSP指令，如include指令</li>
<li>JSP脚本元素和变量</li>
<li>JSP动作</li>
<li>用户自定义标签</li>
</ul>
<h4 id="JSP-使用指南"><a href="#JSP-使用指南" class="headerlink" title="JSP 使用指南"></a>JSP 使用指南</h4><ul>
<li><a href="http://www.runoob.com/jsp/jsp-tutorial.html" target="_blank" rel="noopener">JSP 菜鸟教程</a></li>
</ul>
<h3 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h3><p>Servlet（Server Applet）是Java Servlet的简称，称为小服务程序或服务连接器，用Java编写的服务器端程序，具有独立于平台和协议的特性，主要功能在于交互式地浏览和生成数据，生成动态Web内容。</p>
<p>狭义的Servlet是指Java语言实现的一个接口，广义的Servlet是指任何实现了这个Servlet接口的类，一般情况下，人们将Servlet理解为后者。Servlet运行于支持Java的应用服务器中。从原理上讲，Servlet可以响应任何类型的请求，但绝大多数情况下Servlet只用来扩展基于HTTP协议的Web服务器。</p>
<p>最早支持Servlet标准的是JavaSoft的Java Web Server，此后，一些其它的基于Java的Web服务器开始支持标准的Servlet。</p>
<p>Servlet 是在服务器上运行的小程序。这个词是在 Java applet的环境中创造的，Java applet 是一种当作单独文件跟网页一起发送的小程序，它通常用于在客户端运行，结果得到为用户进行运算或者根据用户互作用定位图形等服务。</p>
<p>服务器上需要一些程序，常常是根据用户输入访问数据库的程序。这些通常是使用公共网关接口（Common Gateway Interface，CGI）应用程序完成的。然而，在服务器上运行 Java，这种程序可使用 Java 编程语言实现。在通信量大的服务器上，JavaServlet 的优点在于它们的执行速度更快于 CGI 程序。各个用户请求被激活成单个程序中的一个线程，而无需创建单独的进程，这意味着服务器端处理请求的系统开销将明显降低。</p>
<h4 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h4><p><img src="https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=7829159b46086e067ea5371963611091/b8389b504fc2d56245855947ed1190ef77c66c8f.jpg" alt></p>
<p>这个过程为：</p>
<ul>
<li>客户端发送请求至服务器端；</li>
<li>服务器将请求信息发送至 Servlet；</li>
<li>Servlet 生成响应内容并将其传给服务器。响应内容动态生成，通常取决于客户端的请求；</li>
<li>服务器将响应返回给客户端。</li>
</ul>
<p>最早支持 Servlet 技术的是 JavaSoft 的 Java Web Server。此后，一些其它的基于 Java 的 Web Server 开始支持标准的 Servlet API。Servlet 的主要功能在于交互式地浏览和修改数据，生成动态 Web 内容。</p>
<p>Servlet 看起来像是通常的 Java 程序。Servlet 导入特定的属于 Java Servlet API 的包。因为是对象字节码，可动态地从网络加载，可以说 Servlet 对 Server 就如同 Applet对 Client 一样，但是，由于 Servlet 运行于 Server 中，它们并不需要一个图形用户界面。从这个角度讲，Servlet 也被称为 FacelessObject。</p>
<p>一个 Servlet 就是 Java 编程语言中的一个类，它被用来扩展服务器的性能，服务器上驻留着可以通过“请求-响应”编程模型来访问的应用程序。虽然 Servlet 可以对任何类型的请求产生响应，但通常只用来扩展 Web 服务器的应用程序。</p>
<p>目前最新版本为 4.0。</p>
<h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><ul>
<li>客户端请求该 Servlet；</li>
<li>加载 Servlet 类到内存；</li>
<li>实例化并调用init()方法初始化该 Servlet；</li>
<li>service()（根据请求方法不同调用doGet() 或者 doPost()，此外还有doHead()、doPut()、doTrace()、doDelete()、doOptions()、destroy())。</li>
<li>加载和实例化 Servlet。这项操作一般是动态执行的。然而，Server 通常会提供一个管理的选项，用于在 Server 启动时强制装载和初始化特定的 Servlet。</li>
</ul>
<p>下图为典型的 Servlet 生命周期方案:</p>
<p><img src="https://gss3.bdstatic.com/7Po3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=adbc37f79a8fa0ec6bca6c5f47fe328b/2cf5e0fe9925bc31930cf45c55df8db1ca1370a5.jpg" alt></p>
<p>1.第一个到达服务器的 HTTP 请求被委派到 Servlet 容器。<br>2.Servlet 容器在调用 service() 方法之前加载 Servlet。<br>3.然后 Servlet 容器处理由多个线程产生的多个请求，每个线程执行一个单一的 Servlet 实例的 service() 方法。</p>
<h4 id="Servlet-常用方法"><a href="#Servlet-常用方法" class="headerlink" title="Servlet 常用方法"></a>Servlet 常用方法</h4><p>HTTPServlet 使用一个 HTML 表单来发送和接收数据。要创建一个 HTTPServlet，请扩展 HttpServlet 类， 该类是用专门的方法来处理 HTML 表单的 GenericServlet 的一个子类。 HTML 表单是由 <form> 和 </form> 标记定义的。表单中典型地包含输入字段（如文本输入字段、复选框、单选按钮和选择列表）和用于提交数据的按钮。当提交信息时，它们还指定服务器应执行哪一个Servlet（或其它的程序）。 HttpServlet 类包含 init()、destroy()、service() 等方法。其中 init() 和 destroy() 方法是继承的。</p>
<ul>
<li>(1) init() 方法</li>
</ul>
<p>在 Servlet 的生命期中，仅执行一次 init() 方法。它是在服务器装入 Servlet 时执行的。 可以配置服务器，以在启动服务器或客户机首次访问 Servlet 时装入 Servlet。 无论有多少客户机访问 Servlet，都不会重复执行 init() 。<br>缺省的 init() 方法通常是符合要求的，但也可以用定制 init() 方法来覆盖它，典型的是管理服务器端资源。 例如，可能编写一个定制 init() 来只用于一次装入 GIF 图像，改进 Servlet 返回 GIF 图像和含有多个客户机请求的性能。另一个示例是初始化数据库连接。缺省的 init() 方法设置了 Servlet 的初始化参数，并用它的 ServletConfig 对象参数来启动配置， 因此所有覆盖 init() 方法的 Servlet 应调用 super.init() 以确保仍然执行这些任务。在调用 service() 方法之前，应确保已完成了 init() 方法。</p>
<ul>
<li>(2) service() 方法</li>
</ul>
<p>service() 方法是 Servlet 的核心。每当一个客户请求一个HttpServlet 对象，该对象的service() 方法就要被调用，而且传递给这个方法一个”请求”(ServletRequest)对象和一个”响应”(ServletResponse)对象作为参数。 在 HttpServlet 中已存在 service() 方法。缺省的服务功能是调用与 HTTP 请求的方法相应的 do 功能。例如， 如果 HTTP 请求方法为 GET，则缺省情况下就调用 doGet() 。Servlet 应该为 Servlet 支持的 HTTP 方法覆盖 do 功能。因为 HttpServlet.service() 方法会检查请求方法是否调用了适当的处理方法，不必要覆盖 service() 方法。只需覆盖相应的 do 方法就可以了。<br>Servlet 的响应可以是下列几种类型：<br>一个输出流，浏览器根据它的内容类型（如 text/html）进行解释。<br>一个 HTTP 错误响应，重定向到另一个 URL、servlet、JSP。</p>
<ul>
<li>(3) doGet() 方法</li>
</ul>
<p>当一个客户通过 HTML 表单发出一个 HTTP GET 请求或直接请求一个 URL 时，doGet() 方法被调用。与 GET 请求相关的参数添加到 URL 的后面，并与这个请求一起发送。当不会修改服务器端的数据时，应该使用 doGet() 方法。</p>
<ul>
<li>(4) doPost() 方法</li>
</ul>
<p>当一个客户通过 HTML 表单发出一个 HTTP POST 请求时，doPost() 方法被调用。与 POST 请求相关的参数作为一个单独的 HTTP 请求从浏览器发送到服务器。当需要修改服务器端的数据时，应该使用 doPost() 方法。</p>
<ul>
<li>(5) destroy() 方法</li>
</ul>
<p>destroy() 方法仅执行一次，即在服务器停止且卸装 Servlet 时执行该方法。典型的，将 Servlet 作为服务器进程的一部分来关闭。缺省的 destroy() 方法通常是符合要求的，但也可以覆盖它，典型的是管理服务器端资源。例如，如果 Servlet 在运行时会累计统计数据，则可以编写一个 destroy() 方法，该方法用于在未装入 Servlet 时将统计数字保存在文件中。另一个示例是关闭数据库连接。<br>当服务器卸装 Servlet 时，将在所有 service() 方法调用完成后，或在指定的时间间隔过后调用 destroy() 方法。一个 Servlet 在运行 service() 方法时可能会产生其它的线程，因此请确认在调用 destroy() 方法时，这些线程已终止或完成。</p>
<ul>
<li>(6) getServletConfig() 方法</li>
</ul>
<p>getServletConfig() 方法返回一个 ServletConfig 对象，该对象用来返回初始化参数和 ServletContext。ServletContext 接口提供有关 servlet 的环境信息。</p>
<ul>
<li>(7) getServletInfo() 方法</li>
</ul>
<p>getServletInfo() 方法是一个可选的方法，它提供有关 servlet 的信息，如作者、版本、版权。<br>当服务器调用 sevlet 的 service()、doGet() 和 doPost() 这三个方法时，均需要 “请求”和“响应”对象作为参数。“请求”对象提供有关请求的信息，而“响应”对象提供了一个将响应信息返回给浏览器的一个通信途径。<br>javax.servlet 软件包中的相关类为 ServletResponse 和 ServletRequest，而 javax.servlet.http 软件包中的相关类为 HttpServletRequest 和 HttpServletResponse。Servlet 通过这些对象与服务器通信并最终与客户端通信。Servlet 能通过调用”请求”对象的方法获知客户端环境，服务器环境的信息和所有由客户机提供的信息。Servlet 可以调用“响应”对象的方法发送响应，该响应是准备发回客户端的。</p>
<h4 id="Servlet-常见容器"><a href="#Servlet-常见容器" class="headerlink" title="Servlet 常见容器"></a>Servlet 常见容器</h4><p>Tomcat, Jetty, resin, Oracle Application server, WebLogic Server, Glassfish, Websphere, JBoss 等等。（提供了 Servlet 功能的服务器，叫做 Servlet 容器。对 web 程序来说，Servlet 容器的作用就相当于桌面程序里操作系统的作用，都是提供一些编程基础设施）</p>
<h4 id="Servlet-线程安全"><a href="#Servlet-线程安全" class="headerlink" title="Servlet 线程安全"></a>Servlet 线程安全</h4><p>在 Web 应用程序中，一个 Servlet 在一个时刻可能被多个用户同时访问。这时 Web 容器将为每个用户创建一个线程来执行 Servlet。<code>如果 Servlet 不涉及共享资源的问题，不必关心多线程问题</code>。但如果 Servlet 需要共享资源，需要保证 Servlet 是线程安全的。</p>
<p>下面是编写线程安全的 Servlet 的一些建议：</p>
<ul>
<li>（1）用方法的局部变量保存请求中的专有数据。对方法中定义的局部变量，进入方法的每个线程都有自己的一份方法变量拷贝。任何线程都不会修改其他线程的局部变量。如果要在不同的请求之间共享数据，应该使用会话来共享这类数据。</li>
<li>（2）只用 Servlet的成员变量来存放那些不会改变的数据。有些数据在 Servlet 生命周期中不发生任何变化，通常是在初始时确定的，这些数据可以使用成员变量保存，如数据库连接名称、其他资源的路径等。</li>
<li>（3）对可能被请求修改的成员变量同步。有时数据成员变量或者环境属性可能被请求修改。当访问这些数据时应该对它们同步，以避免多个线程同时修改这些数据。</li>
<li>（4）如果 Servlet 访问外部资源，那么需要同步访问这些资源。例如，假设 Servlet 要从文件中读写数据。当一个线程读写一个文件时，其他线程也可能正在读写这个文件。文件访问本身不是线程安全的，所以必须编写同步访问这些资源的代码。在编写线程安全的 Servlet 时，下面两种方法是不应该使用的：<ul>
<li>（a）在 Servlet API 中提供了一个 SingleThreadModel 接口，实现这个接口的 Servlet 在被多个客户请求时一个时刻只有一个线程运行。这个接口已被标记不推荐使用。</li>
<li>（b）对 doGet() 或doPost() 方法同步。如果必须在 Servlet 中使用同步代码，应尽量在最小的代码块范围上进行同步。同步代码越小，Servlet 执行得才越好。 </li>
</ul>
</li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jsp/">jsp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/servlet/">servlet</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
    <article id="post-20170216-redis和memcached的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-meta">
    <a href="/2017/02/16/20170216-redis和memcached的区别/" class="article-date">
      <time datetime="2017-02-16T04:12:59.000Z" itemprop="datePublished">2017-02-16</time>
</a>

  </div>
  
  <div class="article-inner">
    
  <input type="hidden" class="isFancy">
  
  
  <header class="article-header">
    
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/16/20170216-redis和memcached的区别/">Redis 和 Memcached 的区别</a>
    </h1>
  


  </header>
  
  
  <div class="article-entry" itemprop="articleBody">
    
    
    <p>1、Redis和Memcache都是将数据存放在内存中，都是内存数据库。不过memcache还可用于缓存其他东西，例如图片、视频等等；</p>
<p>2、Redis不仅仅支持简单的k/v类型的数据，同时还提供list，set，hash等数据结构的存储；</p>
<p>3、虚拟内存–Redis当物理内存用完时，可以将一些很久没用到的value 交换到磁盘；</p>
<p>4、过期策略–memcache在set时就指定，例如set key1 0 0 8,即永不过期。Redis可以通过例如expire 设定，例如expire name 10；</p>
<p>5、分布式–设定memcache集群，利用magent做一主多从;redis可以做一主多从。都可以一主一从；</p>
<p>6、存储数据安全–memcache挂掉后，数据没了；redis可以定期保存到磁盘（持久化）；</p>
<p>7、灾难恢复–memcache挂掉后，数据不可恢复; redis数据丢失后可以通过aof恢复；</p>
<p>8、Redis支持数据的备份，即master-slave模式的数据备份；</p>
<p>9、应用场景不一样：Redis出来作为NoSQL数据库使用外，还能用做消息队列、数据堆栈和数据缓存等；Memcached适合于缓存SQL语句、数据集、用户临时性数据、延迟查询数据和session等。</p>
<ul>
<li><a href="https://www.cnblogs.com/457248499-qq-com/p/7392653.html" target="_blank" rel="noopener">优秀博客参考</a></li>
</ul>

    
  </div>
  
  <div class="article-info article-info-index">
    
    
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/database/">database</a>
    </div>


    
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Memcached/">Memcached</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/">Redis</a></li></ul>
    </div>

    
    <div class="clearfix"></div>
  </div>
  
  </div>
  
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2019 MarkBin All Right Reserved.
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Powered By Hexo</a>
            </div>
            
            <div class="visit">
                
                <span id="busuanzi_container_site_pv" style="display:none">
                    <span id="site-visit">极客到访数:
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                </span>
                
                
                <span></span>
                
                
                <span id="busuanzi_container_page_pv" style="display:none">
                    <span id="page-visit">本页阅读量:
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                </span>
                
            </div>
            
        </div>
</div></footer>
    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>

<script src="/js/main.js"></script>

    <script>
        $(document).ready(function() {
            var backgroundnum = 1;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'xxxxx', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?xxxxxx";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>



<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(
            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


  </div>
</body>
</html>